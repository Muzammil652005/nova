{"version":3,"file":"index-DKiqkKN5.js","sources":["../../../../../../../app/pages/dashboard/index.vue"],"sourcesContent":["<template>\n  <div class=\"w-full h-full p-4\">\n    <div\n      class=\"overflow-x-auto rounded-box border border-base-content/5 bg-white\"\n    >\n      <table class=\"table\">\n        <!-- head -->\n        <thead>\n          <tr>\n            <th>S.No</th>\n            <th>Name</th>\n            <th>Email</th>\n            <th>Phone</th>\n            <th>Location</th>\n            <th>Message</th>\n            <th>Action</th>\n          </tr>\n        </thead>\n        <tbody>\n          <template v-if=\"contactList\">\n            <template v-for=\"(i, k) in contactList\" :key=\"k\">\n              <tr>\n                <td>{{ i.id }}</td>\n                <td>{{ i.name }}</td>\n                <td>{{ i.email }}</td>\n                <td>{{ i.phone }}</td>\n                <td>{{ i.location }}</td>\n                <td>{{ i.message }}</td>\n                <td>\n                  <button\n                    @click=\"deleteContact(i.id)\"\n                    class=\"btn btn-square btn-soft btn-error\"\n                  >\n                    <span\n                      class=\"icon-[solar--trash-bin-2-outline] text-lg\"\n                    ></span>\n                  </button>\n                </td>\n              </tr>\n            </template>\n          </template>\n        </tbody>\n      </table>\n    </div>\n\n    <template v-if=\"total >= 10\">\n      <div class=\"w-full flex items-center justify-between mt-4\">\n        <div class=\"join\">\n          <template v-for=\"i in Math.round(total / limit)\" :key=\"i\">\n            <button\n              @click=\"((page = i), getContact())\"\n              class=\"join-item btn btn-md\"\n              v-html=\"i\"\n            ></button>\n          </template>\n        </div>\n      </div>\n    </template>\n  </div>\n</template>\n\n<script setup>\nconst limit = ref(10);\nconst page = ref(1);\nconst total = ref(10);\nconst contactList = ref(null);\ndefinePageMeta({\n  middleware: [\"auth\"],\n  layout: \"dashboard\",\n});\n\nonMounted(async () => {\n  getContact();\n\n  setInterval(() => {\n    getContact();\n  }, 5000);\n});\n\nasync function getContact() {\n  await $fetch(\"/api/contact\", {\n    method: \"POST\",\n    body: {\n      limit: limit.value,\n      page: page.value,\n    },\n  }).then(function (data) {\n    contactList.value = data.contacts;\n    total.value = data.total;\n  });\n}\n\nasync function deleteContact(id) {\n  await $fetch(\"/api/contact/\" + id, {\n    method: \"DELETE\",\n    body: {\n      limit: limit.value,\n      page: page.value,\n    },\n  }).then(function (data) {\n    contactList.value = data.contacts;\n    total.value = data.total;\n  });\n}\n\nfunction paginate() {\n  return (total.value / limit.value).toFixed(0);\n}\n</script>\n"],"names":["_ssrRenderAttrs","_mergeProps","_unref","_ssrInterpolate","_ssrRenderList"],"mappings":";;;;;;;;;;;;;;;;AA8DA,UAAM,QAAQ,IAAI,EAAE;AACP,QAAI,CAAC;AAClB,UAAM,QAAQ,IAAI,EAAE;AACpB,UAAM,cAAc,IAAI,IAAI;;AAhErB,YAAA,OAAAA,eAAAC,WAAA,EAAA,OAAM,uBAAmB,MAAA,CAAA,CAAA,4OAAA;UAkBNC,MAAA,WAAA,GAAW;;sBACEA,MAAA,WAAA,GAAW,CAApB,GAAG,MAAC;2BAEXC,eAAA,EAAE,EAAE,aACJA,eAAA,EAAE,IAAI,aACNA,eAAA,EAAE,KAAK,aACPA,eAAA,EAAE,KAAK,aACPA,eAAA,EAAE,QAAQ,aACVA,eAAA,EAAE,OAAO;;;;;;;UAkBZD,MAAA,KAAA,KAAK,IAAA;;AAGOE,sBAAA,KAAK,MAAMF,eAAQA,MAAA,KAAA,CAAK,IAA7B,MAAC;wDAIN,KAAC,EAAA,WAAA;AAAA;;;;;;;;;;;;;;;"}